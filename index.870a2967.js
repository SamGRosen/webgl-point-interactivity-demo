!function(){var e,t,n,r=(0,("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire3582)("291vL"),o=!1;function i(e){for(var n=Object.keys(e),r=0;r<n.length;r++)t[n[r]]=e[n[r]]}function s(e){var n=t[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n}function a(){return o||(o=!0,t={},(e={}).register=i,n=s,e.resolve=n),e}function c(e,t){const n=e[1]-e[0],r=(t[1]-t[0])/n,o=t[1]-r*e[1];return e=>r*e+o}a().register(JSON.parse('{"2G4ko":"index.870a2967.js","7qO9F":"offscreen-webgl-worker.141bdd58.js","4zqLQ":"data-processor-worker.eebd0d67.js","1NeRs":"index.089c93f5.js"}')),function(e,t){function n(e){return document.createElement(e)}function r(e,t){for(var n in t)try{e.style[n]=t[n]}catch(e){}return e}function o(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof e}function i(e,t){if("array"!==o(t))return-1;if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function s(){var e=arguments;for(var t in e[1])if(e[1].hasOwnProperty(t))switch(o(e[1][t])){case"object":e[0][t]=s({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return e.length>2?s.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function a(e){return 1===(e=Math.round(255*e).toString(16)).length?"0"+e:e}function c(e,t,n,r){e.addEventListener?e[r?"removeEventListener":"addEventListener"](t,n,!1):e.attachEvent&&e[r?"detachEvent":"attachEvent"]("on"+t,n)}var u;!function(){var t=e.performance;if(t&&(t.now||t.webkitNow)){var n=t.now?"now":"webkitNow";u=t[n].bind(t)}else u=function(){return+new Date}}();var h=e.cancelAnimationFrame||e.cancelRequestAnimationFrame,l=e.requestAnimationFrame;!function(){for(var t=["moz","webkit","o"],n=0,r=0,o=t.length;r<o&&!h;++r)h=e[t[r]+"CancelAnimationFrame"]||e[t[r]+"CancelRequestAnimationFrame"],l=h&&e[t[r]+"RequestAnimationFrame"];h||(l=function(t){var r=u(),o=Math.max(0,16-(r-n));return n=r+o,e.setTimeout((function(){t(r+o)}),o)},h=function(e){clearTimeout(e)})}();var d="string"===o(document.createElement("div").textContent)?"textContent":"innerText";function f(e,t){"object"===o(e)&&undefined===e.nodeType&&(t=e,e=document.body),e||(e=document.body);var g,w,v,y,x,b,S,R,k,_=this,E=s({},f.defaults,t||{}),O={},C=[],P=100,M=[],B=E.threshold,L=0,A=u()-B,T=[],D=[],X="fps"===E.show;function j(e,t,n,r){return w[0|e][Math.round(Math.min((t-n)/(r-n)*P,P))]}function Y(){O.legend.fps!==X&&(O.legend.fps=X,O.legend[d]=X?"FPS":"ms"),S=X?_.fps:_.duration,O.count[d]=S>999?"999+":S.toFixed(S>99?0:E.decimals)}function F(){if(v=u(),A<v-E.threshold&&(_.fps-=_.fps/Math.max(1,60*E.smoothing/E.interval),_.duration=1e3/_.fps),function(){for(R=E.history;R--;)T[R]=0===R?_.fps:T[R-1],D[R]=0===R?_.duration:D[R-1]}(),Y(),E.heat){if(M.length)for(R=M.length;R--;)M[R].el.style[g[M[R].name].heatOn]=X?j(g[M[R].name].heatmap,_.fps,0,E.maxFps):j(g[M[R].name].heatmap,_.duration,E.threshold,0);if(O.graph&&g.column.heatOn)for(R=C.length;R--;)C[R].style[g.column.heatOn]=X?j(g.column.heatmap,T[R],0,E.maxFps):j(g.column.heatmap,D[R],E.threshold,0)}if(O.graph)for(k=0;k<E.history;k++)C[k].style.height=(X?T[k]?Math.round(b/E.maxFps*Math.min(T[k],E.maxFps)):0:D[k]?Math.round(b/E.threshold*Math.min(D[k],E.threshold)):0)+"px"}function N(){E.interval<20?(y=l(N),F()):(y=setTimeout(N,E.interval),x=l(F))}function q(e){(e=e||window.event).preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0),_.toggle()}function U(){E.toggleOn&&c(O.container,E.toggleOn,q,1),e.removeChild(O.container)}function V(){for(var t in O.container&&U(),function(){if(g=f.theme[E.theme],!(w=g.compiledHeatmaps||[]).length&&g.heatmaps.length){for(k=0;k<g.heatmaps.length;k++)for(w[k]=[],R=0;R<=P;R++)w[k][R]=(e=.0033*R,t=g.heatmaps[k].saturation,r=void 0,o=void 0,i=void 0,s=void 0,c=void 0,u=void 0,h=void 0,0==(s=(n=g.heatmaps[k].lightness)<=.5?n*(1+t):n+t-n*t)?"#000":(h=s*((s-(c=2*n-s))/s)*((e*=6)-(u=Math.floor(e))),0===u||6===u?(r=s,o=c+h,i=c):1===u?(r=s-h,o=s,i=c):2===u?(r=c,o=s,i=c+h):3===u?(r=c,o=s-h,i=s):4===u?(r=c+h,o=c,i=s):(r=s,o=c,i=s-h),"#"+a(r)+a(o)+a(i)));g.compiledHeatmaps=w}var e,t,n,r,o,i,s,c,u,h}(),O.container=r(n("div"),g.container),O.count=O.container.appendChild(r(n("div"),g.count)),O.legend=O.container.appendChild(r(n("div"),g.legend)),O.graph=E.graph?O.container.appendChild(r(n("div"),g.graph)):0,M.length=0,O)O[t]&&g[t].heatOn&&M.push({name:t,el:O[t]});if(C.length=0,O.graph)for(O.graph.style.width=E.history*g.column.width+(E.history-1)*g.column.spacing+"px",R=0;R<E.history;R++)C[R]=O.graph.appendChild(r(n("div"),g.column)),C[R].style.position="absolute",C[R].style.bottom=0,C[R].style.right=R*g.column.width+R*g.column.spacing+"px",C[R].style.width=g.column.width+"px",C[R].style.height="0px";I(),Y(),e.appendChild(O.container),O.graph&&(b=O.graph.clientHeight),E.toggleOn&&("click"===E.toggleOn&&(O.container.style.cursor="pointer"),c(O.container,E.toggleOn,q))}function I(){r(O.container,E)}_.options=E,_.fps=0,_.duration=0,_.isPaused=0,_.tickStart=function(){L=u()},_.tick=function(){v=u(),B+=(v-A-B)/E.smoothing,_.fps=1e3/B,_.duration=L<A?B:v-L,A=v},_.pause=function(){return y&&(_.isPaused=1,clearTimeout(y),h(y),h(x),y=x=0),_},_.resume=function(){return y||(_.isPaused=0,N()),_},_.set=function(e,t){return E[e]=t,X="fps"===E.show,-1!==i(e,p)&&V(),-1!==i(e,m)&&I(),_},_.showDuration=function(){return _.set("show","ms"),_},_.showFps=function(){return _.set("show","fps"),_},_.toggle=function(){return _.set("show",X?"ms":"fps"),_},_.hide=function(){return _.pause(),O.container.style.display="none",_},_.show=function(){return _.resume(),O.container.style.display="block",_},_.destroy=function(){_.pause(),U(),_.tick=_.tickStart=function(){}},V(),N()}f.extend=s,window.FPSMeter=f,f.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var p=["toggleOn","theme","heat","graph","history"],m=["position","zIndex","left","top","right","bottom","margin"]}(window),function(e,t,n){t.theme={};var r=t.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};t.theme.dark=t.extend({},r,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),t.theme.light=t.extend({},r,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),t.theme.colorful=t.extend({},r,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),t.theme.transparent=t.extend({},r,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter),r();class u{constructor(e,t,n){this.element=e,this.toolbar=t,this.messenger=n,this.minX=-10,this.maxX=10,this.minY=-10,this.maxY=10,this.currentXRange=[-10,10],this.currentYRange=[-10,10],this._boxSelectMarker=document.getElementById("box-select"),this._lassoSelectMarker=document.getElementById("lasso-select"),this._lassoSelectContainer=document.getElementById("lasso-select-container"),this._currentSelectionPoints=[]}init(){this.width=this.element.getBoundingClientRect().width,this.height=this.element.getBoundingClientRect().height,this._lassoSelectContainer.setAttribute("width",this.width),this._lassoSelectContainer.setAttribute("height",this.height),this.element.addEventListener("wheel",this._onWheel.bind(this),!1);let e=!1;this.element.addEventListener("mousedown",(t=>{switch(e=!0,this.toolbar.mouseAction){case"pan":break;case"box":case"lasso":this._currentSelectionPoints=this._calculateViewportSpot(t.layerX,t.layerY)}}),!1),this.element.addEventListener("mousemove",(t=>{if(e)switch(this.toolbar.mouseAction){case"pan":this._onPan(t),this._updateBoxSelectView(),this._updateLassoSelectView();break;case"box":this._currentSelectionPoints=this._currentSelectionPoints.slice(0,2).concat(this._calculateViewportSpot(t.layerX,t.layerY)),this._updateBoxSelectView();break;case"lasso":this._currentSelectionPoints.push(...this._calculateViewportSpot(t.layerX,t.layerY)),this._updateLassoSelectView()}}),!1),this.element.addEventListener("mouseup",(t=>{switch(e=!1,this.toolbar.mouseAction){case"pan":break;case"box":if(4!==this._currentSelectionPoints.length)return this._currentSelectionPoints=[],void this._updateBoxSelectView();this._onBoxSelect();break;case"lasso":if(this._currentSelectionPoints.length<6)return this._currentSelectionPoints=[],void this._updateLassoSelectView();this._onLassoSelect()}})),this.element.addEventListener("mouseleave",(()=>{switch(this.toolbar.mouseAction){case"pan":this._isPanning=!1}}))}_onWheel(e){if(e.preventDefault(),!this.toolbar.lockedX){const t=[...this.currentXRange];this.currentXRange[0]-=e.wheelDelta/500,this.currentXRange[1]+=e.wheelDelta/500,this.currentXRange[0]=Math.max(this.currentXRange[0],this.minX),this.currentXRange[1]=Math.min(this.currentXRange[1],this.maxX),this.currentXRange[1]<this.currentXRange[0]&&(this.currentXRange=t)}if(!this.toolbar.lockedY){const t=[...this.currentYRange];this.currentYRange[0]-=e.wheelDelta/500,this.currentYRange[1]+=e.wheelDelta/500,this.currentYRange[0]=Math.max(this.currentYRange[0],this.minY),this.currentYRange[1]=Math.min(this.currentYRange[1],this.maxY),this.currentYRange[1]<this.currentYRange[0]&&(this.currentYRange=t)}return this.toolbar.updateSelectionWindowDisplay(this.currentXRange,this.currentYRange),this.messenger({type:"viewport",viewport:this.getViewport()}),this._updateBoxSelectView(),this._updateLassoSelectView(),!1}_onPan(e){if(!this.toolbar.lockedX){const t=[...this.currentXRange];this.currentXRange[0]-=e.movementX/50,this.currentXRange[1]-=e.movementX/50,this.currentXRange[0]=Math.max(this.currentXRange[0],this.minX),this.currentXRange[1]=Math.min(this.currentXRange[1],this.maxX),this.currentXRange[1]<this.currentXRange[0]&&(this.currentXRange=t)}if(!this.toolbar.lockedY){const t=[...this.currentYRange];this.currentYRange[0]+=e.movementY/50,this.currentYRange[1]+=e.movementY/50,this.currentYRange[0]=Math.max(this.currentYRange[0],this.minY),this.currentYRange[1]=Math.min(this.currentYRange[1],this.maxY),this.currentYRange[1]<this.currentYRange[0]&&(this.currentYRange=t)}this.messenger({type:"viewport",viewport:this.getViewport()}),this.toolbar.updateSelectionWindowDisplay(this.currentXRange,this.currentYRange)}_updateBoxSelectView(){if(4!==this._currentSelectionPoints.length)return this._boxSelectMarker.style.left="-100px",this._boxSelectMarker.style.top="-100px",this._boxSelectMarker.style.width="0",void(this._boxSelectMarker.style.height="0");const e=this.element.getBoundingClientRect(),t=this._calculateViewportSpotInverse(this._currentSelectionPoints[0],this._currentSelectionPoints[1]),n=this._calculateViewportSpotInverse(this._currentSelectionPoints[2],this._currentSelectionPoints[3]),r=n[0]-t[0],o=n[1]-t[1];this._boxSelectMarker.style.left=r<0?`${e.left+t[0]+r}px`:`${e.left+t[0]}px`,this._boxSelectMarker.style.top=o<0?`${e.top+t[1]+o}px`:`${e.top+t[1]}px`,this._boxSelectMarker.style.width=`${Math.abs(r)}px`,this._boxSelectMarker.style.height=`${Math.abs(o)}px`}_updateLassoSelectView(){if(this._currentSelectionPoints.length<6)return this._lassoSelectMarker.style.left="-100px",this._lassoSelectMarker.style.top="-100px",this._lassoSelectMarker.style.width="0",void(this._lassoSelectMarker.style.height="0");const e=this.element.getBoundingClientRect();this._lassoSelectContainer.style.top=e.top,this._lassoSelectContainer.style.left=e.left;let t="";for(let e=0;e<this._currentSelectionPoints.length;e+=2){const n=this._calculateViewportSpotInverse(this._currentSelectionPoints[e],this._currentSelectionPoints[e+1]);t+=`${n[0]}, ${n[1]} `}this._lassoSelectMarker.setAttribute("points",t)}_onBoxSelect(){this.messenger({type:"selectBox",points:this._currentSelectionPoints})}_onLassoSelect(){this.messenger({type:"selectLasso",points:this._currentSelectionPoints})}_calculateViewportSpot(e,t){const n=c([0,this.width],this.currentXRange),r=c([this.height,0],this.currentYRange);return[n(e),r(t)]}_calculateViewportSpotInverse(e,t){const n=c(this.currentXRange,[0,this.width]),r=c(this.currentYRange,[this.height,0]);return[n(e),r(t)]}getViewport(){return{minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,currentXRange:this.currentXRange,currentYRange:this.currentYRange}}}class h{constructor(e){this.messenger=e,this.lockedX=!1,this.lockedY=!1,this.mouseAction="pan",this.dataset="tsne-10"}init(){document.getElementById("lock-x").addEventListener("change",(e=>{this.lockedX=e.target.checked})),document.getElementById("lock-y").addEventListener("change",(e=>{this.lockedY=e.target.checked})),document.getElementById("dataset").value=this.dataset,this.messenger({type:"load",path:this.determineDatasetPath(this.dataset)}),document.getElementById("dataset").addEventListener("change",(e=>{this.dataset=e.target.value,this.messenger({type:"load",path:this.determineDatasetPath(this.dataset)})})),this.prevIcon=null,document.querySelectorAll(".controls img").forEach((e=>{e.addEventListener("click",(()=>{this.prevIcon&&this.prevIcon.classList.remove("selected"),this.mouseAction=e.alt.substring(0,e.alt.indexOf(" ")),e.classList.add("selected"),this.prevIcon=e}))}))}updateSelectionWindowDisplay(e,t){document.querySelector(".selection-window").textContent=`[${e[0].toFixed(2)}, ${e[1].toFixed(2)}] x [${t[0].toFixed(2)}, ${t[1].toFixed(2)}]`}determineDatasetPath(e){switch(e){case"tsne":return"data/tsne.csv";case"tsne-10":return"data/tsne_tenth.csv";case"tsne-100":return"data/tsne_hundreth.csv";default:console.error(`Did not recognize dataset: ${e}`)}}}var l,d={},f={};l=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}};var p,m,g,w=!1;function v(e){return"[object Array]"===g.call(e)}function y(e){return void 0===e}function x(e){return null!==e&&!y(e)&&null!==e.constructor&&!y(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function b(e){return"[object ArrayBuffer]"===g.call(e)}function S(e){return"undefined"!=typeof FormData&&e instanceof FormData}function R(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function k(e){return"string"==typeof e}function _(e){return"number"==typeof e}function E(e){return null!==e&&"object"==typeof e}function O(e){if("[object Object]"!==g.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function C(e){return"[object Date]"===g.call(e)}function P(e){return"[object File]"===g.call(e)}function M(e){return"[object Blob]"===g.call(e)}function B(e){return"[object Function]"===g.call(e)}function L(e){return E(e)&&B(e.pipe)}function A(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function T(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function D(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function X(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),v(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function j(){var e={};function t(t,n){O(e[n])&&O(t)?e[n]=j(e[n],t):O(t)?e[n]=j({},t):v(t)?e[n]=t.slice():e[n]=t}for(var n=0,r=arguments.length;n<r;n++)X(arguments[n],t);return e}function Y(e,t,n){return X(t,(function(t,r){e[r]=n&&"function"==typeof t?m(t,n):t})),e}function F(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}function N(){return w||(w=!0,p={},m=l,g=Object.prototype.toString,p={isArray:v,isArrayBuffer:b,isBuffer:x,isFormData:S,isArrayBufferView:R,isString:k,isNumber:_,isObject:E,isPlainObject:O,isUndefined:y,isDate:C,isFile:P,isBlob:M,isFunction:B,isStream:L,isURLSearchParams:A,isStandardBrowserEnv:D,forEach:X,merge:j,extend:Y,trim:T,stripBOM:F}),p}N();var q=l;N();var U,V=!1;function I(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function H(){return V||(V=!0,U={},N(),U=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(N().isURLSearchParams(t))r=t.toString();else{var o=[];N().forEach(t,(function(e,t){null!=e&&(N().isArray(e)?t+="[]":e=[e],N().forEach(e,(function(e){N().isDate(e)?e=e.toISOString():N().isObject(e)&&(e=JSON.stringify(e)),o.push(I(t)+"="+I(e))})))})),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}),U}var z=H();function $(){this.handlers=[]}N(),$.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},$.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},$.prototype.forEach=function(e){N().forEach(this.handlers,(function(t){null!==t&&e(t)}))};var W=$;N();N();var J,G,K=function(e,t,n){return N().forEach(n,(function(n){e=n(e,t)})),e},Q=J=function(e){return!(!e||!e.__CANCEL__)},Z=!1;function ee(){return Z||(Z=!0,G={},G=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}),G}var te,ne,re=!1;function oe(){return re||(re=!0,te={},ne=ee(),te=function(e,t,n,r,o){var i=new Error(e);return ne(i,t,n,r,o)}),te}var ie,se,ae=!1;function ce(){return ae||(ae=!0,ie={},se=oe(),ie=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(se("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}),ie}var ue,he=!1;function le(){return he||(he=!0,ue={},N(),ue=N().isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),N().isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),N().isString(r)&&s.push("path="+r),N().isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}),ue}var de,fe=!1;function pe(){return fe||(fe=!0,de={},de=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),de}var me,ge=!1;function we(){return ge||(ge=!0,me={},me=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),me}var ve,ye,xe,be=!1;function Se(){return be||(be=!0,ve={},ye=pe(),xe=we(),ve=function(e,t){return e&&!ye(t)?xe(e,t):t}),ve}var Re,ke,_e=!1;function Ee(){return _e||(_e=!0,Re={},N(),ke=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Re=function(e){var t,n,r,o={};return e?(N().forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=N().trim(e.substr(0,r)).toLowerCase(),n=N().trim(e.substr(r+1)),t){if(o[t]&&ke.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}),Re}var Oe,Ce=!1;function Pe(){return Ce||(Ce=!0,Oe={},N(),Oe=N().isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=N().isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}),Oe}var Me,Be,Le,Ae,Te,De,Xe,je=!1;function Ye(){return je||(je=!0,Me={},N(),Be=ce(),le(),Le=H(),Ae=Se(),Te=Ee(),De=Pe(),Xe=oe(),Me=function(e){return new Promise((function(t,n){var r=e.data,o=e.headers;N().isFormData(r)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+a)}var c=Ae(e.baseURL,e.url);if(i.open(e.method.toUpperCase(),Le(c,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in i?Te(i.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:r,config:e,request:i};Be(t,n,o),i=null}},i.onabort=function(){i&&(n(Xe("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){n(Xe("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(Xe(t,e,"ECONNABORTED",i)),i=null},N().isStandardBrowserEnv()){var u=(e.withCredentials||De(c))&&e.xsrfCookieName?le().read(e.xsrfCookieName):void 0;u&&(o[e.xsrfHeaderName]=u)}if("setRequestHeader"in i&&N().forEach(o,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)})),N().isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),n(e),i=null)})),r||(r=null),i.send(r)}))}),Me}var Fe,Ne,qe,Ue,Ve=Ne={};function Ie(){throw new Error("setTimeout has not been defined")}function He(){throw new Error("clearTimeout has not been defined")}function ze(e){if(qe===setTimeout)return setTimeout(e,0);if((qe===Ie||!qe)&&setTimeout)return qe=setTimeout,setTimeout(e,0);try{return qe(e,0)}catch(t){try{return qe.call(null,e,0)}catch(t){return qe.call(this,e,0)}}}!function(){try{qe="function"==typeof setTimeout?setTimeout:Ie}catch(e){qe=Ie}try{Ue="function"==typeof clearTimeout?clearTimeout:He}catch(e){Ue=He}}();var $e,We=[],Je=!1,Ge=-1;function Ke(){Je&&$e&&(Je=!1,$e.length?We=$e.concat(We):Ge=-1,We.length&&Qe())}function Qe(){if(!Je){var e=ze(Ke);Je=!0;for(var t=We.length;t;){for($e=We,We=[];++Ge<t;)$e&&$e[Ge].run();Ge=-1,t=We.length}$e=null,Je=!1,function(e){if(Ue===clearTimeout)return clearTimeout(e);if((Ue===He||!Ue)&&clearTimeout)return Ue=clearTimeout,clearTimeout(e);try{Ue(e)}catch(t){try{return Ue.call(null,e)}catch(t){return Ue.call(this,e)}}}(e)}}function Ze(e,t){this.fun=e,this.array=t}function et(){}Ve.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];We.push(new Ze(e,t)),1!==We.length||Je||ze(Qe)},Ze.prototype.run=function(){this.fun.apply(null,this.array)},Ve.title="browser",Ve.browser=!0,Ve.env={},Ve.argv=[],Ve.version="",Ve.versions={},Ve.on=et,Ve.addListener=et,Ve.once=et,Ve.off=et,Ve.removeListener=et,Ve.removeAllListeners=et,Ve.emit=et,Ve.prependListener=et,Ve.prependOnceListener=et,Ve.listeners=function(e){return[]},Ve.binding=function(e){throw new Error("process.binding is not supported")},Ve.cwd=function(){return"/"},Ve.chdir=function(e){throw new Error("process.chdir is not supported")},Ve.umask=function(){return 0};var tt=Ne;N();N();var nt=function(e,t){N().forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},rt={"Content-Type":"application/x-www-form-urlencoded"};function ot(e,t){!N().isUndefined(e)&&N().isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var it,st={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==tt&&"[object process]"===Object.prototype.toString.call(tt))&&(it=Ye()),it),transformRequest:[function(e,t){return nt(t,"Accept"),nt(t,"Content-Type"),N().isFormData(e)||N().isArrayBuffer(e)||N().isBuffer(e)||N().isStream(e)||N().isFile(e)||N().isBlob(e)?e:N().isArrayBufferView(e)?e.buffer:N().isURLSearchParams(e)?(ot(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):N().isObject(e)?(ot(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};function at(e){e.cancelToken&&e.cancelToken.throwIfRequested()}st.headers={common:{Accept:"application/json, text/plain, */*"}},N().forEach(["delete","get","head"],(function(e){st.headers[e]={}})),N().forEach(["post","put","patch"],(function(e){st.headers[e]=N().merge(rt)})),Fe=st;var ct,ut=function(e){return at(e),e.headers=e.headers||{},e.data=K(e.data,e.headers,e.transformRequest),e.headers=N().merge(e.headers.common||{},e.headers[e.method]||{},e.headers),N().forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Fe.adapter)(e).then((function(t){return at(e),t.data=K(t.data,t.headers,e.transformResponse),t}),(function(t){return Q(t)||(at(e),t&&t.response&&(t.response.data=K(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))};N();var ht=ct=function(e,t){t=t||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return N().isPlainObject(e)&&N().isPlainObject(t)?N().merge(e,t):N().isPlainObject(t)?N().merge({},t):N().isArray(t)?t.slice():t}function c(r){N().isUndefined(t[r])?N().isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}N().forEach(r,(function(e){N().isUndefined(t[e])||(n[e]=a(void 0,t[e]))})),N().forEach(o,c),N().forEach(i,(function(r){N().isUndefined(t[r])?N().isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])})),N().forEach(s,(function(r){r in t?n[r]=a(e[r],t[r]):r in e&&(n[r]=a(void 0,e[r]))}));var u=r.concat(o).concat(i).concat(s),h=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return N().forEach(h,c),n};function lt(e){this.defaults=e,this.interceptors={request:new W,response:new W}}lt.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=ht(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[ut,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},lt.prototype.getUri=function(e){return e=ht(this.defaults,e),z(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},N().forEach(["delete","get","head","options"],(function(e){lt.prototype[e]=function(t,n){return this.request(ht(n||{},{method:e,url:t,data:(n||{}).data}))}})),N().forEach(["post","put","patch"],(function(e){lt.prototype[e]=function(t,n,r){return this.request(ht(r||{},{method:e,url:t,data:n}))}}));var dt=lt,ft=ct;function pt(e){var t=new dt(e),n=q(dt.prototype.request,t);return N().extend(n,dt.prototype,t),N().extend(n,t),n}var mt=pt(Fe);mt.Axios=dt,mt.create=function(e){return pt(ft(mt.defaults,e))};var gt;function wt(e){this.message=e}wt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},wt.prototype.__CANCEL__=!0,gt=wt,mt.Cancel=gt;var vt,yt=gt;function xt(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new yt(e),t(n.reason))}))}xt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},xt.source=function(){var e;return{token:new xt((function(t){e=t})),cancel:e}},vt=xt,mt.CancelToken=vt,mt.isCancel=J,mt.all=function(e){return Promise.all(e)};var bt;bt=function(e){return function(t){return e.apply(null,t)}},mt.spread=bt;var St;St=function(e){return"object"==typeof e&&!0===e.isAxiosError},mt.isAxiosError=St;var Rt=mt;(f=mt).default=Rt,d=f;class kt extends class{constructor(){this.content=document.querySelector(".rendering-container"),this.canvas=document.createElement("canvas"),this.width=Math.min(this.content.clientWidth,1e3),this.height=.9*this.content.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.toolbar=new h(this.handleMessage.bind(this)),this.mouseReader=new u(this.canvas,this.toolbar,this.handleMessage.bind(this)),this.initFpsmeter(),this.toolbar.init()}addToDOM(e,t){this.drawer=new e({canvas:this.canvas,...this.mouseReader.getViewport()},t),this.drawer.tick=()=>this.meter.tick(),this.content.appendChild(this.canvas),this.mouseReader.init()}initFpsmeter(){this.meter=new window.FPSMeter(document.querySelector("footer"),{graph:1,heat:1,theme:"light",history:25,top:"-20px",left:`${this.width}px`,transform:"translateX(-100%)"})}loadCsv(e){d.get(e).then((e=>{this.buildDataProcessor(e.data),this.clearDrawerBuffers(),this.sendToDrawerBuffer(e.data),this.forceDrawerRender()}))}handleMessage(e){switch(e.type){case"load":this.loadCsv(e.path);break;case"viewport":this.sendDrawerState(e.viewport);break;case"selectBox":case"selectLasso":this.selectPoints(e.points)}}sendDrawerState(e){this.drawer.receiveState({...e})}forceDrawerRender(){this.drawer.render({...this.mouseReader.getViewport()})}sendToDrawerBuffer(e){this.drawer.populateBuffers(e)}clearDrawerBuffers(){this.drawer.clearBuffers()}buildDataProcessor(e){this.dataProcessor=new(r().default)(e)}selectPoints(e){4===e.length?this.dataProcessor.selectBox(e):e.length>=6&&this.dataProcessor.selectLasso(e)}}{constructor(){super(),this.mouseReader=new u(document.createElement("div"),this.toolbar,this.handleMessage.bind(this)),this.canvas.style.position="absolute",this.mouseReader.element.id="mouse-reader"}addToDOM(e,t){this.content.appendChild(this.canvas),this.content.appendChild(this.mouseReader.element),this.mouseReader.init(),this.offscreenCanvas=this.canvas.transferControlToOffscreen(),this.worker=e,this.worker.postMessage({type:"init",canvas:this.offscreenCanvas,...this.mouseReader.getViewport()},[this.offscreenCanvas]),this.worker.onmessage=e=>{"tick"===e.data.type&&this.meter.tick()},this.dataWorker=t}sendDrawerState(e){this.worker.postMessage({type:"state",...e})}forceDrawerRender(){this.worker.postMessage({type:"render",...this.mouseReader.getViewport()})}sendToDrawerBuffer(e){this.worker.postMessage({type:"buffer",responseData:e})}clearDrawerBuffers(){this.worker.postMessage({type:"clearBuffers"})}buildDataProcessor(e){this.dataWorker.postMessage({type:"init",data:e})}selectPoints(e){4===e.length?this.dataWorker.postMessage({type:"selectBox",points:e}):e.length>=6&&this.dataWorker.postMessage({type:"selectLasso",points:e})}}var _t,Et,Ot,Ct=!1;function Pt(){return Et||(Et=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return(""+e[0]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}()),Et}function Mt(e){let t=(""+e).match(/(https?|file|ftp):\/\/[^/]+/);if(!t)throw new Error("Origin not found");return t[0]}function Bt(){return Ct||(Ct=!0,Et=null,(_t={}).getBundleURL=Pt,Ot=Mt,_t.getOrigin=Ot),_t}var Lt,At=!1;function Tt(){return At||(At=!0,Lt={},Bt(),Lt=function(e){var t=Bt().getBundleURL()+e;return Bt().getOrigin(t)===self.location.origin?t:URL.createObjectURL(new Blob(["importScripts("+JSON.stringify(t)+");"]))}),Lt}var Dt,Xt,jt,Yt,Ft=!1;function Nt(e){if(""===e)return".";var t="/"===e[e.length-1]?e.slice(0,e.length-1):e,n=t.lastIndexOf("/");return-1===n?".":t.slice(0,n)}function qt(e,t){if(e===t)return"";var n=e.split("/");"."===n[0]&&n.shift();var r,o,i=t.split("/");for("."===i[0]&&i.shift(),r=0;(r<i.length||r<n.length)&&null==o;r++)n[r]!==i[r]&&(o=r);var s=[];for(r=0;r<n.length-o;r++)s.push("..");return i.length>o&&s.push.apply(s,i.slice(o)),s.join("/")}function Ut(){return Ft||(Ft=!0,Dt={},Xt=a().resolve,Dt=function(e,t){return qt(Nt(Xt(e)),Xt(t))},jt=Nt,Dt._dirname=jt,Yt=qt,Dt._relative=Yt),Dt}var Vt,It=!1;function Ht(){return It||(It=!0,Vt={},Vt=Tt()(Ut()("2G4ko","7qO9F"))),Vt}var zt,$t=!1;function Wt(){return $t||($t=!0,zt={},zt=Tt()(Ut()("2G4ko","4zqLQ"))),zt}document.addEventListener("DOMContentLoaded",(()=>{const e=new kt;e.addToDOM(new Worker(Ht()),new Worker(Wt())),e.forceDrawerRender()}))}();
//# sourceMappingURL=index.870a2967.js.map
